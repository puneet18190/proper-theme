<div id="content">
  <div class="news-carousel-wrapper">
    <dl id="news-carousel" class="news-carousel-style">
      <%= render 'properties/news_carousel'%>
    </dl>
  </div>
  <div class="container" style="width:1230px">
    <div class="panel">
      <div class="box-line">
        <h3 class="title-heading">Please complete the form</h3>
      </div>
      <%if params[:action]=="edit"%>
        <% url = tenant_path(@tenant) %>
      <%else%>
        <% url = tenants_path%>
      <%end%>
      <div class="proper-form-step" style="height:750px">
        <%= form_for @tenant,url: url, html: { multipart: true,class: "",:style=>"width:40%;float:left" } do |f| %>
        <div class="proper-form-step-area">
          <h4>Personal Information</h4>
          <div style="width:300px;height:400px">
            <div class="span5">
              <%= f.label :first_name, "First Name" %>
              <%= f.text_field :first_name, class: "input-block-level", required: "true" %>
            </div>
            <div class="span5">
              <%= f.label :last_name, "Last Name" %>
              <%= f.text_field :last_name, class: "input-block-level", required: "true" %>
            </div>
            <div class="span5">
              <%= f.label "Address 1" %>
              <%= f.text_field :address1, class: "input-block-level", required: "true" %>
            </div>
            <div class="span5">
              <%= f.label "Address 2" %>
              <%= f.text_field :address2, class: "input-block-level" %>
            </div>
            <div class="span5">
              <%= f.label "Address 3" %>
              <%= f.text_field :address3, class: "input-block-level" %>
            </div>
            <div class="span5">
              <%= f.label :postcode %>
              <%= f.text_field :postcode, class: "input-block-level", required: "true" %>
            </div>
            <div class="span5">
              <%= f.label "Phone" %>
              <%= f.text_field :phone, class: "input-block-level", required: "true" %>
            </div>
            <div class="span5">
              <%= f.label :mobile, "Alternative Phone" %>
              <%= f.text_field :mobile, class: "input-block-level" %>
            </div>
            <div class="span5">
              <%= f.label :email %>
                <%= f.text_field :email, class: "input-block-level" %>
            </div>
            <div class="span5">
              <%= f.label :dob, "Date of Birth" %>
              <%= f.date_select :dob, class: "input-block-level", required: "true", start_year: 1930,end_year: 2015 %>
            </div>
          </div>
        </div>
        <%= f.submit 'Save', class: "btn btn-proper btn-large submit-btn", style: "margin-left:50%" %>
        <%end%>
        <form class="" action="/tenant_search_result" method="get" style="float:right;width:50%">
          <%= search_form_for Property.search(params[:q]) do |f| %>
            <div class="proper-form-step-area">
            <h4>Property Requirements</h4>
              <%=f.hidden_field :user_id, value: params[:id]%>
              <div class="span5">
                <%= f.label :category_cont, "Category" %>
                <%= f.select :category_cont, ["Rent","Sale"], class: "input-block-level", selected: "#{@category unless @data.nil?}" %>
              </div>
              <div class="span5">
                <%= f.label :type, "Type" %>
                <%= f.select :property_type,["Not Specified", "Character Property", "Mobile / Park Homes", "Land", "Houses", "Commercial Property", "Flats / Apartments"], class: "input-block-level", selected: "#{@type unless @data.nil?}" %>
              </div>
              <div class="span5">
                <%= f.label :price_lteq, "Min Price" %>
                <%= f.search_field :price_gteq, class: "input-block-level", value: "#{@price_greater_than unless @data.nil?}" %>
              </div>
              <div class="span5">
                <%= f.label :price_gteq, "Max Price" %>
                <%= f.search_field :price_lteq, class: "input-block-level", value: "#{@price_less_than unless @data.nil?}" %>
              </div>
              <div class="span5">
                <%= f.label :beds_eq, "Bedrooms" %>
                <%= f.select :beds_eq, ["Not Specified","1","2","3","4","5+"], class: "input-block-level", selected: "#{@beds unless @data.nil?}" %>
              </div>
              <div class="span5">
                <%= f.label :location %>
                <%= f.search_field :address1_or_address2_or_address3_cont_or_town_cont, class: "input-block-level", value: "#{@location unless @data.nil?}" %>
              </div>
              <div class="span5">
                <%= f.submit 'Search', class: "btn btn-proper btn-large", style: "margin:10%;margin-left:50%" %>
              </div>
            </div>
            
          <%end%>
        </form>  
      </div>
    </div>
  </div>
</div>

<style type="text/css">
  select{
    width: 100% !important;
  }
  
  .input-block-level{
    display: inline-block;
    width: 250px !important;
    float: right;
  }
  label{
    display: inline-block;
    width: auto;
    margin: 5px
  }
  #user_dob_1i{
    width: 20% !important;
    float: right;
  }
  #user_dob_2i{
    width: 30% !important;
    float: right;
  }
  #user_dob_3i{
    width: 15% !important;
    float: right;
  }
  .span5{
    margin-left: 0
  }
  #q_category_cont, #q_property_type, #q_beds_eq{
    float: right;
    width: 70% !important
  }
</style>
<script type="text/javascript">
  $(".submit-btn").click(function(e){
    var d = parseInt($("#user_dob_3i option:selected" ).text())
    var m = parseInt($("#user_dob_2i option:selected" ).val())
    var y = parseInt($("#user_dob_1i option:selected" ).text())
    if(isNaN(d) || isNaN(m) || isNaN(y)){
      e.preventDefault();
      alert("Please Enter your Date of Birth")
    }else if (<%= DateTime.now.year %> >= y ){
      if(<%= DateTime.now.month %> >= m ){
        // if(<%= DateTime.now.day %> >= d){
        //   $(".proper-form-step").submit()
        // }else 
        if(<%= DateTime.now.month %> == m && <%= DateTime.now.day %> >= d){
          e.preventDefault();
          alert("cannot be future date")
        }else{
          $(".proper-form-step").submit()
        }
      }else{
        e.preventDefault();
        alert("cannot be future date")  
      }
      
    }else{
      e.preventDefault();
      alert("cannot be future date")
    }
  })
</script>